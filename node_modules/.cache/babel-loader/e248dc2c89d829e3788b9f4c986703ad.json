{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/umang/hub/space-voyager/space-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _createForOfIteratorHelper = require(\"/home/umang/hub/space-voyager/space-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _asyncToGenerator = require(\"/home/umang/hub/space-voyager/space-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/umang/hub/space-voyager/space-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/umang/hub/space-voyager/space-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\n\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nvar _ImageDrawer_images;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageDrawer = void 0;\n\nvar Utils_1 = require(\"../../Utils\");\n\nvar Enums_1 = require(\"../../Enums\");\n\nvar Utils_2 = require(\"./Utils\");\n\nvar ImageDrawer = /*#__PURE__*/function () {\n  function ImageDrawer() {\n    _classCallCheck(this, ImageDrawer);\n\n    _ImageDrawer_images.set(this, void 0);\n\n    __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n  }\n\n  _createClass(ImageDrawer, [{\n    key: \"getSidesCount\",\n    value: function getSidesCount() {\n      return 12;\n    }\n  }, {\n    key: \"getImages\",\n    value: function getImages(container) {\n      var containerImages = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").find(function (t) {\n        return t.id === container.id;\n      });\n\n      if (!containerImages) {\n        __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").push({\n          id: container.id,\n          images: []\n        });\n\n        return this.getImages(container);\n      } else {\n        return containerImages;\n      }\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(container, image) {\n      var containerImages = this.getImages(container);\n      containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(container) {\n        var _iterator, _step, manualParticle, emitterOptions, _iterator2, _step2, emitter, interactiveEmitters, _iterator3, _step3, _emitter;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadImagesFromParticlesOptions(container, container.actualOptions.particles);\n\n              case 2:\n                _context.next = 4;\n                return this.loadImagesFromParticlesOptions(container, container.actualOptions.interactivity.modes.trail.particles);\n\n              case 4:\n                _iterator = _createForOfIteratorHelper(container.actualOptions.manualParticles);\n                _context.prev = 5;\n\n                _iterator.s();\n\n              case 7:\n                if ((_step = _iterator.n()).done) {\n                  _context.next = 13;\n                  break;\n                }\n\n                manualParticle = _step.value;\n                _context.next = 11;\n                return this.loadImagesFromParticlesOptions(container, manualParticle.options);\n\n              case 11:\n                _context.next = 7;\n                break;\n\n              case 13:\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](5);\n\n                _iterator.e(_context.t0);\n\n              case 18:\n                _context.prev = 18;\n\n                _iterator.f();\n\n                return _context.finish(18);\n\n              case 21:\n                emitterOptions = container.actualOptions;\n\n                if (!emitterOptions.emitters) {\n                  _context.next = 45;\n                  break;\n                }\n\n                if (!(emitterOptions.emitters instanceof Array)) {\n                  _context.next = 43;\n                  break;\n                }\n\n                _iterator2 = _createForOfIteratorHelper(emitterOptions.emitters);\n                _context.prev = 25;\n\n                _iterator2.s();\n\n              case 27:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context.next = 33;\n                  break;\n                }\n\n                emitter = _step2.value;\n                _context.next = 31;\n                return this.loadImagesFromParticlesOptions(container, emitter.particles);\n\n              case 31:\n                _context.next = 27;\n                break;\n\n              case 33:\n                _context.next = 38;\n                break;\n\n              case 35:\n                _context.prev = 35;\n                _context.t1 = _context[\"catch\"](25);\n\n                _iterator2.e(_context.t1);\n\n              case 38:\n                _context.prev = 38;\n\n                _iterator2.f();\n\n                return _context.finish(38);\n\n              case 41:\n                _context.next = 45;\n                break;\n\n              case 43:\n                _context.next = 45;\n                return this.loadImagesFromParticlesOptions(container, emitterOptions.emitters.particles);\n\n              case 45:\n                interactiveEmitters = emitterOptions.interactivity.modes.emitters;\n\n                if (!interactiveEmitters) {\n                  _context.next = 69;\n                  break;\n                }\n\n                if (!(interactiveEmitters instanceof Array)) {\n                  _context.next = 67;\n                  break;\n                }\n\n                _iterator3 = _createForOfIteratorHelper(interactiveEmitters);\n                _context.prev = 49;\n\n                _iterator3.s();\n\n              case 51:\n                if ((_step3 = _iterator3.n()).done) {\n                  _context.next = 57;\n                  break;\n                }\n\n                _emitter = _step3.value;\n                _context.next = 55;\n                return this.loadImagesFromParticlesOptions(container, _emitter.particles);\n\n              case 55:\n                _context.next = 51;\n                break;\n\n              case 57:\n                _context.next = 62;\n                break;\n\n              case 59:\n                _context.prev = 59;\n                _context.t2 = _context[\"catch\"](49);\n\n                _iterator3.e(_context.t2);\n\n              case 62:\n                _context.prev = 62;\n\n                _iterator3.f();\n\n                return _context.finish(62);\n\n              case 65:\n                _context.next = 69;\n                break;\n\n              case 67:\n                _context.next = 69;\n                return this.loadImagesFromParticlesOptions(container, interactiveEmitters.particles);\n\n              case 69:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[5, 15, 18, 21], [25, 35, 38, 41], [49, 59, 62, 65]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n    }\n  }, {\n    key: \"loadImagesFromParticlesOptions\",\n    value: function () {\n      var _loadImagesFromParticlesOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(container, options) {\n        var _a, _b, _c, shapeOptions, idx, imageOptions, _iterator4, _step4, optionsImage, groupName, group;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                shapeOptions = options === null || options === void 0 ? void 0 : options.shape;\n\n                if (!(!(shapeOptions === null || shapeOptions === void 0 ? void 0 : shapeOptions.type) || !shapeOptions.options || !(0, Utils_1.isInArray)(Enums_1.ShapeType.image, shapeOptions.type) && !(0, Utils_1.isInArray)(Enums_1.ShapeType.images, shapeOptions.type))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                idx = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").findIndex(function (t) {\n                  return t.id === container.id;\n                });\n\n                if (idx >= 0) {\n                  __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").splice(idx, 1);\n                }\n\n                imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n\n                if (!(imageOptions instanceof Array)) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                _iterator4 = _createForOfIteratorHelper(imageOptions);\n                _context2.prev = 8;\n\n                _iterator4.s();\n\n              case 10:\n                if ((_step4 = _iterator4.n()).done) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                optionsImage = _step4.value;\n                _context2.next = 14;\n                return this.loadImageShape(container, optionsImage);\n\n              case 14:\n                _context2.next = 10;\n                break;\n\n              case 16:\n                _context2.next = 21;\n                break;\n\n              case 18:\n                _context2.prev = 18;\n                _context2.t0 = _context2[\"catch\"](8);\n\n                _iterator4.e(_context2.t0);\n\n              case 21:\n                _context2.prev = 21;\n\n                _iterator4.f();\n\n                return _context2.finish(21);\n\n              case 24:\n                _context2.next = 28;\n                break;\n\n              case 26:\n                _context2.next = 28;\n                return this.loadImageShape(container, imageOptions);\n\n              case 28:\n                if (!(options === null || options === void 0 ? void 0 : options.groups)) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                _context2.t1 = _regeneratorRuntime.keys(options.groups);\n\n              case 30:\n                if ((_context2.t2 = _context2.t1()).done) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                groupName = _context2.t2.value;\n                group = options.groups[groupName];\n                _context2.next = 35;\n                return this.loadImagesFromParticlesOptions(container, group);\n\n              case 35:\n                _context2.next = 30;\n                break;\n\n              case 37:\n                if (!((_c = (_b = options === null || options === void 0 ? void 0 : options.destroy) === null || _b === void 0 ? void 0 : _b.split) === null || _c === void 0 ? void 0 : _c.particles)) {\n                  _context2.next = 40;\n                  break;\n                }\n\n                _context2.next = 40;\n                return this.loadImagesFromParticlesOptions(container, options === null || options === void 0 ? void 0 : options.destroy.split.particles);\n\n              case 40:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[8, 18, 21, 24]]);\n      }));\n\n      function loadImagesFromParticlesOptions(_x2, _x3) {\n        return _loadImagesFromParticlesOptions.apply(this, arguments);\n      }\n\n      return loadImagesFromParticlesOptions;\n    }()\n  }, {\n    key: \"loadImageShape\",\n    value: function () {\n      var _loadImageShape = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(container, imageShape) {\n        var imageFunc, image;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                imageFunc = imageShape.replaceColor ? Utils_2.downloadSvgImage : Utils_2.loadImage;\n                _context3.next = 4;\n                return imageFunc(imageShape.src);\n\n              case 4:\n                image = _context3.sent;\n\n                if (image) {\n                  this.addImage(container, image);\n                }\n\n                _context3.next = 11;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.warn(\"tsParticles error - \".concat(imageShape.src, \" not found\"));\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 8]]);\n      }));\n\n      function loadImageShape(_x4, _x5) {\n        return _loadImageShape.apply(this, arguments);\n      }\n\n      return loadImageShape;\n    }()\n  }, {\n    key: \"draw\",\n    value: function draw(context, particle, radius, opacity) {\n      var _a, _b;\n\n      if (!context) {\n        return;\n      }\n\n      var image = particle.image;\n      var element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n\n      if (!element) {\n        return;\n      }\n\n      var ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n      var pos = {\n        x: -radius,\n        y: -radius\n      };\n\n      if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n        context.globalAlpha = opacity;\n      }\n\n      context.drawImage(element, pos.x, pos.y, radius * 2, radius * 2 / ratio);\n\n      if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n        context.globalAlpha = 1;\n      }\n    }\n  }, {\n    key: \"loadShape\",\n    value: function loadShape(particle) {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n        return;\n      }\n\n      var images = this.getImages(particle.container).images;\n      var imageData = particle.shapeData;\n      var image = (_a = images.find(function (t) {\n        return t.source === imageData.src;\n      })) !== null && _a !== void 0 ? _a : images[0];\n      var color = particle.getFillColor();\n      var imageRes;\n\n      if (!image) {\n        return;\n      }\n\n      if (image.svgData !== undefined && imageData.replaceColor && color) {\n        var svgColoredData = (0, Utils_2.replaceColorSvg)(image, color, (_c = (_b = particle.opacity) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : 1);\n        var svg = new Blob([svgColoredData], {\n          type: \"image/svg+xml\"\n        });\n        var domUrl = URL || window.URL || window.webkitURL || window;\n        var url = domUrl.createObjectURL(svg);\n        var img = new Image();\n        imageRes = {\n          data: Object.assign(Object.assign({}, image), {\n            svgData: svgColoredData\n          }),\n          ratio: imageData.width / imageData.height,\n          replaceColor: (_d = imageData.replaceColor) !== null && _d !== void 0 ? _d : imageData.replace_color,\n          source: imageData.src\n        };\n        img.addEventListener(\"load\", function () {\n          var pImage = particle.image;\n\n          if (pImage) {\n            pImage.loaded = true;\n            image.element = img;\n          }\n\n          domUrl.revokeObjectURL(url);\n        });\n        img.addEventListener(\"error\", function () {\n          domUrl.revokeObjectURL(url);\n          (0, Utils_2.loadImage)(imageData.src).then(function (img2) {\n            var pImage = particle.image;\n\n            if (pImage) {\n              image.element = img2 === null || img2 === void 0 ? void 0 : img2.element;\n              pImage.loaded = true;\n            }\n          });\n        });\n        img.src = url;\n      } else {\n        imageRes = {\n          data: image,\n          loaded: true,\n          ratio: imageData.width / imageData.height,\n          replaceColor: (_e = imageData.replaceColor) !== null && _e !== void 0 ? _e : imageData.replace_color,\n          source: imageData.src\n        };\n      }\n\n      if (!imageRes.ratio) {\n        imageRes.ratio = 1;\n      }\n\n      var fill = (_f = imageData.fill) !== null && _f !== void 0 ? _f : particle.fill;\n      var close = (_g = imageData.close) !== null && _g !== void 0 ? _g : particle.close;\n      var imageShape = {\n        image: imageRes,\n        fill: fill,\n        close: close\n      };\n      particle.image = imageShape.image;\n      particle.fill = imageShape.fill;\n      particle.close = imageShape.close;\n    }\n  }]);\n\n  return ImageDrawer;\n}();\n\nexports.ImageDrawer = ImageDrawer;\n_ImageDrawer_images = new WeakMap();","map":{"version":3,"sources":["/home/umang/hub/space-voyager/space-app/node_modules/tsparticles/Shapes/Image/ImageDrawer.js"],"names":["__classPrivateFieldSet","receiver","state","value","kind","f","TypeError","has","call","set","__classPrivateFieldGet","get","_ImageDrawer_images","Object","defineProperty","exports","ImageDrawer","Utils_1","require","Enums_1","Utils_2","container","containerImages","find","t","id","push","images","getImages","image","loadImagesFromParticlesOptions","actualOptions","particles","interactivity","modes","trail","manualParticles","manualParticle","options","emitterOptions","emitters","Array","emitter","interactiveEmitters","shapeOptions","shape","type","isInArray","ShapeType","idx","findIndex","splice","imageOptions","_a","optionsImage","loadImageShape","groups","groupName","group","_c","_b","destroy","split","imageShape","imageFunc","replaceColor","downloadSvgImage","loadImage","src","addImage","console","warn","context","particle","radius","opacity","element","data","ratio","pos","x","y","svgData","globalAlpha","drawImage","_d","_e","_f","_g","imageData","shapeData","source","color","getFillColor","imageRes","undefined","svgColoredData","replaceColorSvg","svg","Blob","domUrl","URL","window","webkitURL","url","createObjectURL","img","Image","assign","width","height","replace_color","addEventListener","pImage","loaded","revokeObjectURL","then","img2","fill","close","WeakMap"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ImageDrawer_images;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageDrawer = void 0;\nconst Utils_1 = require(\"../../Utils\");\nconst Enums_1 = require(\"../../Enums\");\nconst Utils_2 = require(\"./Utils\");\nclass ImageDrawer {\n    constructor() {\n        _ImageDrawer_images.set(this, void 0);\n        __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n    }\n    getSidesCount() {\n        return 12;\n    }\n    getImages(container) {\n        const containerImages = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").find((t) => t.id === container.id);\n        if (!containerImages) {\n            __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").push({\n                id: container.id,\n                images: [],\n            });\n            return this.getImages(container);\n        }\n        else {\n            return containerImages;\n        }\n    }\n    addImage(container, image) {\n        const containerImages = this.getImages(container);\n        containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n    }\n    async init(container) {\n        await this.loadImagesFromParticlesOptions(container, container.actualOptions.particles);\n        await this.loadImagesFromParticlesOptions(container, container.actualOptions.interactivity.modes.trail.particles);\n        for (const manualParticle of container.actualOptions.manualParticles) {\n            await this.loadImagesFromParticlesOptions(container, manualParticle.options);\n        }\n        const emitterOptions = container.actualOptions;\n        if (emitterOptions.emitters) {\n            if (emitterOptions.emitters instanceof Array) {\n                for (const emitter of emitterOptions.emitters) {\n                    await this.loadImagesFromParticlesOptions(container, emitter.particles);\n                }\n            }\n            else {\n                await this.loadImagesFromParticlesOptions(container, emitterOptions.emitters.particles);\n            }\n        }\n        const interactiveEmitters = emitterOptions.interactivity.modes.emitters;\n        if (interactiveEmitters) {\n            if (interactiveEmitters instanceof Array) {\n                for (const emitter of interactiveEmitters) {\n                    await this.loadImagesFromParticlesOptions(container, emitter.particles);\n                }\n            }\n            else {\n                await this.loadImagesFromParticlesOptions(container, interactiveEmitters.particles);\n            }\n        }\n    }\n    destroy() {\n        __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n    }\n    async loadImagesFromParticlesOptions(container, options) {\n        var _a, _b, _c;\n        const shapeOptions = options === null || options === void 0 ? void 0 : options.shape;\n        if (!(shapeOptions === null || shapeOptions === void 0 ? void 0 : shapeOptions.type) ||\n            !shapeOptions.options ||\n            (!(0, Utils_1.isInArray)(Enums_1.ShapeType.image, shapeOptions.type) && !(0, Utils_1.isInArray)(Enums_1.ShapeType.images, shapeOptions.type))) {\n            return;\n        }\n        const idx = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").findIndex((t) => t.id === container.id);\n        if (idx >= 0) {\n            __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").splice(idx, 1);\n        }\n        const imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n        if (imageOptions instanceof Array) {\n            for (const optionsImage of imageOptions) {\n                await this.loadImageShape(container, optionsImage);\n            }\n        }\n        else {\n            await this.loadImageShape(container, imageOptions);\n        }\n        if (options === null || options === void 0 ? void 0 : options.groups) {\n            for (const groupName in options.groups) {\n                const group = options.groups[groupName];\n                await this.loadImagesFromParticlesOptions(container, group);\n            }\n        }\n        if ((_c = (_b = options === null || options === void 0 ? void 0 : options.destroy) === null || _b === void 0 ? void 0 : _b.split) === null || _c === void 0 ? void 0 : _c.particles) {\n            await this.loadImagesFromParticlesOptions(container, options === null || options === void 0 ? void 0 : options.destroy.split.particles);\n        }\n    }\n    async loadImageShape(container, imageShape) {\n        try {\n            const imageFunc = imageShape.replaceColor ? Utils_2.downloadSvgImage : Utils_2.loadImage;\n            const image = await imageFunc(imageShape.src);\n            if (image) {\n                this.addImage(container, image);\n            }\n        }\n        catch (_a) {\n            console.warn(`tsParticles error - ${imageShape.src} not found`);\n        }\n    }\n    draw(context, particle, radius, opacity) {\n        var _a, _b;\n        if (!context) {\n            return;\n        }\n        const image = particle.image;\n        const element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n        if (!element) {\n            return;\n        }\n        const ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n        const pos = {\n            x: -radius,\n            y: -radius,\n        };\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = opacity;\n        }\n        context.drawImage(element, pos.x, pos.y, radius * 2, (radius * 2) / ratio);\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = 1;\n        }\n    }\n    loadShape(particle) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n            return;\n        }\n        const images = this.getImages(particle.container).images;\n        const imageData = particle.shapeData;\n        const image = (_a = images.find((t) => t.source === imageData.src)) !== null && _a !== void 0 ? _a : images[0];\n        const color = particle.getFillColor();\n        let imageRes;\n        if (!image) {\n            return;\n        }\n        if (image.svgData !== undefined && imageData.replaceColor && color) {\n            const svgColoredData = (0, Utils_2.replaceColorSvg)(image, color, (_c = (_b = particle.opacity) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : 1);\n            const svg = new Blob([svgColoredData], { type: \"image/svg+xml\" });\n            const domUrl = URL || window.URL || window.webkitURL || window;\n            const url = domUrl.createObjectURL(svg);\n            const img = new Image();\n            imageRes = {\n                data: Object.assign(Object.assign({}, image), { svgData: svgColoredData }),\n                ratio: imageData.width / imageData.height,\n                replaceColor: (_d = imageData.replaceColor) !== null && _d !== void 0 ? _d : imageData.replace_color,\n                source: imageData.src,\n            };\n            img.addEventListener(\"load\", () => {\n                const pImage = particle.image;\n                if (pImage) {\n                    pImage.loaded = true;\n                    image.element = img;\n                }\n                domUrl.revokeObjectURL(url);\n            });\n            img.addEventListener(\"error\", () => {\n                domUrl.revokeObjectURL(url);\n                (0, Utils_2.loadImage)(imageData.src).then((img2) => {\n                    const pImage = particle.image;\n                    if (pImage) {\n                        image.element = img2 === null || img2 === void 0 ? void 0 : img2.element;\n                        pImage.loaded = true;\n                    }\n                });\n            });\n            img.src = url;\n        }\n        else {\n            imageRes = {\n                data: image,\n                loaded: true,\n                ratio: imageData.width / imageData.height,\n                replaceColor: (_e = imageData.replaceColor) !== null && _e !== void 0 ? _e : imageData.replace_color,\n                source: imageData.src,\n            };\n        }\n        if (!imageRes.ratio) {\n            imageRes.ratio = 1;\n        }\n        const fill = (_f = imageData.fill) !== null && _f !== void 0 ? _f : particle.fill;\n        const close = (_g = imageData.close) !== null && _g !== void 0 ? _g : particle.close;\n        const imageShape = {\n            image: imageRes,\n            fill,\n            close,\n        };\n        particle.image = imageShape.image;\n        particle.fill = imageShape.fill;\n        particle.close = imageShape.close;\n    }\n}\nexports.ImageDrawer = ImageDrawer;\n_ImageDrawer_images = new WeakMap();\n"]},"metadata":{},"sourceType":"script"}